{% extends 'base.html.twig' %}

{% block title %}Liste des Quiz{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="display-5">üìã Liste des Quiz</h1>
        <!-- Difficulty Filter Dropdown -->
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="difficultyFilter" data-bs-toggle="dropdown" aria-expanded="false">
                Filtrer par difficult√©
            </button>
            <ul class="dropdown-menu" aria-labelledby="difficultyFilter">
                <li><a class="dropdown-item" href="#" data-diff="all">Tous</a></li>
                <li><a class="dropdown-item" href="#" data-diff="easy">Facile</a></li>
                <li><a class="dropdown-item" href="#" data-diff="medium">Moyen</a></li>
                <li><a class="dropdown-item" href="#" data-diff="hard">Difficile</a></li>
            </ul>
        </div>
    </div>

    {% if quizzes|length > 0 %}
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="quizContainer">
            {% for quiz in quizzes %}
                <div class="col" data-diff="{{ quiz.diff }}">
                    <div class="card shadow-sm h-100">
                        <div class="card-body">
                            <h5 class="card-title">{{ quiz.Matiere }}</h5>
                            <h6>
                                {% if quiz.diff == 'easy' %}
                                    <span class="badge bg-success">Facile</span>
                                {% elseif quiz.diff == 'medium' %}
                                    <span class="badge bg-warning text-dark">Moyen</span>
                                {% elseif quiz.diff == 'hard' %}
                                    <span class="badge bg-danger">Difficile</span>
                                {% else %}
                                    <span class="badge bg-secondary">Inconnu</span>
                                {% endif %}
                            </h6>
                            <hr>
                            <p><strong>Question 1:</strong> {{ quiz.quest1 }}</p>
                            <p><strong>Question 2:</strong> {{ quiz.quest2 }}</p>
                            <p><strong>Question 3:</strong> {{ quiz.quest3 }}</p>
                            <p><strong>Bonne R√©p. 1:</strong> {{ quiz.correctAnswer1 }}</p>
                            <p><strong>Bonne R√©p. 2:</strong> {{ quiz.correctAnswer2 }}</p>
                            <p><strong>Bonne R√©p. 3:</strong> {{ quiz.correctAnswer3 }}</p>
                        </div>
                        <div class="card-footer d-flex justify-content-between">
                            <a href="{{ path('app_quiz_answer', {'id': quiz.id}) }}" class="btn btn-outline-warning btn-sm">‚úèÔ∏è Answer Quizz</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info text-center">
            Aucun quiz trouv√©.
        </div>
    {% endif %}
</div>

<!-- JavaScript for Filtering -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const dropdownItems = document.querySelectorAll('.dropdown-item');
        const quizContainer = document.getElementById('quizContainer');

        dropdownItems.forEach(item => {
            item.addEventListener('click', function (e) {
                e.preventDefault(); // Prevent default link behavior

                const selectedDiff = this.getAttribute('data-diff'); // Get selected difficulty
                const quizCards = quizContainer.querySelectorAll('.col'); // Get all quiz cards

                quizCards.forEach(card => {
                    const cardDiff = card.getAttribute('data-diff'); // Get card's difficulty
                    if (selectedDiff === 'all' || cardDiff === selectedDiff) {
                        card.style.display = 'block'; // Show card if it matches the filter
                    } else {
                        card.style.display = 'none'; // Hide card if it doesn't match
                    }
                });
            });
        });
    });
</script>
{% endblock %}



