{% extends 'base.html.twig' %}

{% block title %}Répondre au Quiz{% endblock %}

{% block stylesheets %}
    <style>
        /* Custom CSS for star rating */
        .star-rating {
            display: flex;
            flex-direction: row-reverse;
            justify-content: flex-end;
        }
        .star-rating input[type="radio"] {
            display: none;
        }
        .star-rating label {
            font-size: 2rem;
            color: #ddd;
            cursor: pointer;
        }
        .star-rating input[type="radio"]:checked ~ label {
            color: #ffc107; /* Yellow color for selected stars */
        }
        .star-rating label:hover,
        .star-rating label:hover ~ label {
            color: #ffc107; /* Yellow color on hover */
        }
    </style>
{% endblock %}

{% block body %}
<div class="container mt-5">
    <h1 class="display-5 mb-4">✏️ Répondre au Quiz: {{ quiz.Matiere }}</h1>

    <div class="mb-4">
        <h5>Question 1: {{ quiz.quest1 }}</h5>
        <h5>Question 2: {{ quiz.quest2 }}</h5>
        <h5>Question 3: {{ quiz.quest3 }}</h5>
    </div>

    {{ form_start(form) }}
        {{ form_row(form.userAnswer1) }}
        {{ form_row(form.userAnswer2) }}
        {{ form_row(form.userAnswer3) }}
        <div class="form-group">
            {{ form_label(form.rate) }}
            <div class="star-rating">
                <!-- Add a hidden input for 0 stars -->
                <input type="radio" id="star0" name="{{ form.rate.vars.full_name }}" value="0" {% if form.rate.vars.value == 0 %}checked{% endif %}>
                <!-- Generate stars from 5 to 1 -->
                {% for i in 5..1 %}
                    <input type="radio" id="star{{ i }}" name="{{ form.rate.vars.full_name }}" value="{{ i }}" {% if form.rate.vars.value == i %}checked{% endif %}>
                    <label for="star{{ i }}">&#9733;</label>
                {% endfor %}
            </div>
            {{ form_errors(form.rate) }}
        </div>
        <button class="btn btn-primary mt-3">Soumettre</button>
      
    {{ form_end(form) }}
  <a href="{{ path('app_quiz_indexFront') }}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Quiz List
                </a>
    {% if app.session.flashbag.has('success') %}
        <div class="alert alert-success mt-3">
            {{ app.session.flashbag.get('success')[0] }}
        </div>
    {% endif %}

    {% if respQuiz is not empty %}
        <div class="mt-3">
            <strong>Votre score: {{ respQuiz.score }}</strong>
        </div>
    {% endif %}
</div>
{% endblock %}